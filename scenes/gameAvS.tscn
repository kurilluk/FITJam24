[gd_scene load_steps=19 format=3 uid="uid://bb38gi1cyox50"]

[ext_resource type="Theme" uid="uid://dhwpta7qgho67" path="res://UI/UI_theme.tres" id="1_gdy2b"]
[ext_resource type="Texture2D" uid="uid://8ohvsc1ifcrc" path="res://images/cracked-rock-1024x1024-assets/rock.png" id="2_cip7m"]
[ext_resource type="TileSet" uid="uid://f3wmg8detyai" path="res://tileset/tileset.tres" id="3_au6bn"]
[ext_resource type="Script" path="res://scripts/astarUniversal.gd" id="3_ho5w1"]
[ext_resource type="Script" path="res://pathfind_astar.gd" id="4_05qbq"]
[ext_resource type="TileSet" uid="uid://drcy18v0gpc0d" path="res://tileset/Rocks.tres" id="5_6phh8"]
[ext_resource type="Script" path="res://character.gd" id="7_1m55k"]
[ext_resource type="Texture2D" uid="uid://by23djxj6dfnd" path="res://images/ball-assets/ball.png" id="8_fwqga"]
[ext_resource type="Texture2D" uid="uid://bjsmfha28ro00" path="res://sprites/sparkle.png" id="9_kt7oo"]
[ext_resource type="PackedScene" uid="uid://btqmn3pt72x8f" path="res://scenes/player.tscn" id="10_mslo6"]
[ext_resource type="Script" path="res://scripts/StressMeter.gd" id="11_6y3gv"]
[ext_resource type="PackedScene" uid="uid://d3cfww00ag4cy" path="res://scenes/tramp.tscn" id="11_m77vg"]
[ext_resource type="Script" path="res://scripts/Tramps.gd" id="12_yqpm5"]

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_foa8s"]
light_mode = 1

[sub_resource type="CanvasItemMaterial" id="1"]
blend_mode = 1
particles_animation = true
particles_anim_h_frames = 8
particles_anim_v_frames = 1
particles_anim_loop = false

[sub_resource type="Curve" id="2"]
_data = [Vector2(0, 0), 0.0, 1.15429, 0, 0, Vector2(0.316832, 0.342045), 0.0399209, 0.0399209, 0, 0, Vector2(1, 0.136364), -1.05591, 0.0, 0, 0]
point_count = 3

[sub_resource type="Gradient" id="3"]
offsets = PackedFloat32Array(0, 0.692737, 1)
colors = PackedColorArray(1, 0.893555, 0, 1, 0.265625, 1, 0.490903, 1, 0.0154343, 0.688679, 0.987793, 1)

[sub_resource type="Environment" id="Environment_ot2c4"]
glow_intensity = 3.33
glow_strength = 0.96
glow_blend_mode = 0
glow_hdr_threshold = 1.95

[node name="Game" type="Node2D"]

[node name="GUI" type="CanvasLayer" parent="."]

[node name="todo_texture_bar" type="TextureProgressBar" parent="GUI"]
visible = false
offset_right = 384.0
offset_bottom = 40.0

[node name="FearBar" type="ProgressBar" parent="GUI"]
offset_left = 64.0
offset_top = 64.0
offset_right = 640.0
offset_bottom = 192.0
theme = ExtResource("1_gdy2b")
value = 50.0

[node name="Level" type="TileMap" parent="."]
z_index = 2
tile_set = ExtResource("5_6phh8")
format = 2
layer_0/tile_data = PackedInt32Array(0, 65537, 0, 1, 131073, 0, 2, 65537, 0, 3, 131073, 0, 4, 196609, 0, 5, 131073, 0, 6, 196609, 0, 7, 1, 0, 8, 1, 0, 9, 131073, 0, 10, 65537, 0, 11, 196609, 0, 12, 196609, 0, 13, 131073, 0, 14, 1, 0, 15, 131073, 0, 16, 196609, 0, 17, 1, 0, 18, 131073, 0, 19, 196609, 0, 20, 65537, 0, 21, 65537, 0, 22, 196609, 0, 23, 131073, 0, 24, 1, 0, 25, 65537, 0, 26, 65537, 0, 27, 131073, 0, 28, 65537, 0, 29, 65537, 0, 30, 131073, 0, 31, 196609, 0, 983071, 65537, 0, 983070, 196609, 0, 983069, 65537, 0, 983068, 65537, 0, 983067, 196609, 0, 983066, 196609, 0, 983065, 65537, 0, 983064, 1, 0, 983063, 1, 0, 983062, 131073, 0, 983061, 196609, 0, 983060, 196609, 0, 983059, 196609, 0, 983058, 196609, 0, 983057, 131073, 0, 983056, 65537, 0, 983055, 196609, 0, 983054, 196609, 0, 983053, 1, 0, 983052, 1, 0, 983051, 131073, 0, 983050, 196609, 0, 983049, 131073, 0, 983048, 65537, 0, 983047, 131073, 0, 983046, 131073, 0, 983045, 65537, 0, 983044, 131073, 0, 983043, 1, 0, 983042, 1, 0, 983041, 131073, 0, 983040, 196609, 0, 917504, 65537, 0, 851968, 196609, 0, 786432, 196609, 0, 720896, 196609, 0, 655360, 1, 0, 589824, 65537, 0, 524288, 131073, 0, 458752, 1, 0, 393216, 65537, 0, 327680, 65537, 0, 262144, 131073, 0, 196608, 196609, 0, 131072, 131073, 0, 65536, 1, 0, 262147, 65536, 131072, 327683, 196608, 131072, 393219, 196608, 0, 458756, 0, 0, 524292, 65536, 196608, 589828, 0, 196608, 655364, 196608, 65536, 720900, 131072, 0, 786436, 0, 65536, 851973, 196608, 196608, 917509, 65536, 196608, 786437, 65536, 196608, 786438, 196608, 196608, 720903, 196608, 0, 720904, 65536, 196608, 655369, 131072, 0, 655370, 0, 0, 589835, 131072, 0, 393229, 0, 131072, 327693, 131072, 65536, 327692, 131072, 131072, 327691, 196608, 131072, 262154, 196608, 196608, 196617, 0, 131072, 196618, 131072, 196608, 262155, 196608, 0, 262156, 0, 196608, 327702, 131072, 65536, 327703, 65536, 196608, 393240, 0, 131072, 524313, 131072, 65536, 589849, 131072, 65536, 655386, 196608, 131072, 720920, 196608, 65536, 720919, 0, 131072, 720918, 196608, 0, 720917, 0, 0, 720907, 65536, 65536, 655371, 0, 65536, 589834, 65536, 196608, 458763, 196608, 196608, 393228, 65536, 196608, 327694, 196608, 0, 196626, 131072, 196608, 262162, 0, 65536, 393233, 0, 65536, 720911, 196608, 0, 786447, 196608, 196608, 786448, 196608, 65536, 786449, 0, 196608, 589844, 0, 196608, 524308, 0, 65536, 458773, 131072, 131072, 393237, 131072, 196608, 196629, 196608, 196608, 131094, 0, 65536, 196639, 196608, 0, 262176, 0, 0, 458784, 131072, 0, 524320, 196608, 0, 655390, 196608, 196608, 720925, 0, 0, 851995, 65536, 65536, 851994, 196608, 0, 917529, 0, 0, 851992, 65536, 65536, 786456, 131072, 196608, 655384, 196608, 0, 589848, 196608, 65536, 524312, 196608, 196608, 327705, 0, 65536, 262170, 0, 196608, 196634, 65536, 196608, 196633, 196608, 131072, 262168, 131072, 65536, 589840, 131072, 131072, 655375, 131072, 0, 655374, 131072, 0, 720909, 65536, 131072, 786445, 196608, 0, 851981, 0, 131072, 393226, 0, 131072)
script = ExtResource("3_ho5w1")

[node name="Background" type="Sprite2D" parent="Level"]
z_index = -1
texture_repeat = 2
scale = Vector2(0.94993, 0.911409)
texture = ExtResource("2_cip7m")
centered = false
region_enabled = true
region_rect = Rect2(0, 0, 2048, 1024)

[node name="TileMap_old" type="TileMap" parent="."]
visible = false
position = Vector2(1024, 0)
tile_set = ExtResource("3_au6bn")
format = 2
layer_0/tile_data = PackedInt32Array(-131079, 196611, 0, -131078, 196611, 0, -131077, 65539, 65536, -131076, 65539, 65536, -131075, 196611, 196608, -131074, 131075, 196608, -131073, 196611, 0, -196608, 131075, 65536, -196607, 196611, 131072, -196606, 65539, 196608, -196605, 65539, 0, -196604, 65539, 196608, -196603, 131075, 0, -196602, 3, 65536, -196601, 3, 196608, -196600, 131075, 131072, -196599, 3, 196608, -196598, 65539, 0, -196597, 3, 65536, -196596, 3, 131072, -196595, 3, 65536, -196594, 65539, 196608, -196593, 3, 0, -196592, 65539, 131072, -196591, 131075, 65536, -196590, 131075, 131072, -196589, 3, 0, -196588, 65539, 0, -196587, 196611, 196608, -196586, 3, 65536, -196585, 65539, 65536, -196584, 3, 0, 851961, 3, 0, 851962, 196611, 0, 851963, 131075, 196608, 851964, 3, 196608, 851965, 3, 0, 851966, 131075, 196608, 851967, 196611, 131072, 786432, 196611, 65536, 786433, 131075, 131072, 786434, 3, 0, 786435, 131075, 196608, 786436, 3, 131072, 786437, 196611, 65536, 786438, 65539, 196608, 786439, 65539, 65536, 786440, 131075, 196608, 786441, 196611, 196608, 786442, 131075, 0, 786443, 196611, 0, 786444, 196611, 131072, 786445, 65539, 0, 786446, 131075, 196608, 786447, 131075, 196608, 786448, 196611, 196608, 786449, 3, 196608, 786450, 196611, 65536, 786451, 196611, 131072, 786452, 196611, 0, 786453, 65539, 131072, 786454, 196611, 0, 786455, 131075, 0, 786456, 3, 0, 786426, 3, 65536, 720891, 196611, 0, 720892, 3, 131072, 655357, 196611, 131072, 589822, 196611, 0, 524287, 3, 196608, 458752, 196611, 131072, 393217, 131075, 65536, 131073, 196611, 196608, 131074, 196611, 65536, 131075, 65539, 196608, 196612, 65539, 196608, 196613, 196611, 131072, 196614, 196611, 196608, -65533, 131075, 0, -65532, 3, 0, -65531, 65539, 131072, -131066, 131075, 65536, -131065, 131075, 65536, -131064, 196611, 0, 12, 65539, 0, 65549, 3, 196608, 131085, 65539, 0, 196622, 131075, 196608, 262161, 3, 196608, 327698, 65539, 196608, 393235, 196611, 65536, 458770, 131075, 196608, 458769, 196611, 65536, 458768, 3, 196608, 524303, 65539, 131072, 524302, 196611, 196608, 524301, 65539, 196608, 524295, 196611, 65536, 458759, 131075, 131072, 458760, 3, 131072, 393224, 3, 131072, 458758, 65539, 131072, 524294, 3, 196608, 524293, 131075, 131072, 589828, 3, 196608, 589827, 196611, 131072, 655363, 131075, 196608, 720897, 3, 0, 720896, 65539, 196608, 655366, 131075, 131072, 655367, 131075, 65536, 720903, 65539, 65536, 720904, 196611, 65536, 655369, 131075, 65536, 655370, 196611, 196608, 720906, 196611, 196608, 720907, 65539, 65536, 655375, 131075, 196608, 655376, 196611, 0, 655377, 65539, 65536, 655378, 65539, 65536, 655379, 196611, 0, 655380, 196611, 0, 458775, 131075, 65536, 524311, 196611, 0, 524310, 3, 196608, 458772, 131075, 131072, 393236, 65539, 65536, 327701, 3, 131072, 196630, 3, 196608, 131094, 196611, 196608, 131093, 65539, 65536, 65557, 131075, 131072, 19, 196611, 0, 18, 3, 196608, 17, 196611, 131072, -65519, 3, 0, -65520, 196611, 0, -65521, 3, 196608, -65522, 196611, 65536, -65523, 131075, 196608, -131059, 3, 196608, -65525, 3, 0, 11, 196611, 131072, 10, 196611, 196608, 131082, 196611, 65536, 196618, 65539, 131072, 262154, 3, 65536, 262152, 131075, 131072, 196616, 196611, 0, 196615, 65539, 131072, 262150, 65539, 196608, 1, 3, 0, -65535, 3, 131072, 65534, 65539, 131072, 131070, 3, 131072, 196605, 131075, 0, 262141, 131075, 131072, 327677, 3, 196608, 393213, 3, 196608, 393212, 131075, 196608, 458748, 3, 131072, 524283, 196611, 0, 524282, 131075, 0, 524288, 3, 65536, 589825, 131075, 196608, 655361, 3, 65536, 655362, 196611, 65536, 589832, 65539, 131072, 589833, 131075, 0, 589837, 196611, 0, 655373, 3, 131072, 655374, 131075, 131072, 720911, 131075, 196608, 720912, 196611, 0, 720919, 131075, 65536, 655384, 196611, 65536, 262168, 65539, 131072, 196632, 131075, 0, 131096, 65539, 65536, -65514, 3, 196608, -131049, 65539, 0, -65513, 196611, 0, -65512, 3, 0, -131048, 131075, 0, -65543, 3, 65536, -7, 131075, 131072, 65529, 3, 0, 131065, 131075, 196608, 196601, 131075, 0, 262137, 65539, 65536, 327673, 196611, 0, 393209, 65539, 131072, 458745, 131075, 0, 458746, 131075, 196608, 589818, 3, 0, 655354, 196611, 65536, 720890, 65539, 0, 786425, 3, 65536, 720889, 3, 65536, 655353, 3, 196608, 589817, 196611, 0, 524281, 65539, 196608, 786427, 65539, 196608, 786429, 3, 131072, 786430, 65539, 0, 786428, 131075, 131072)
script = ExtResource("4_05qbq")

[node name="Character" type="Marker2D" parent="."]
visible = false
top_level = true
position = Vector2(32, 32)
script = ExtResource("7_1m55k")

[node name="Sprite2D" type="Sprite2D" parent="Character"]
visible = false
light_mask = 0
material = SubResource("CanvasItemMaterial_foa8s")
texture = ExtResource("8_fwqga")

[node name="CPUParticles2D" type="CPUParticles2D" parent="Character"]
visible = false
material = SubResource("1")
position = Vector2(-20, 0)
rotation = 1.5708
amount = 30
texture = ExtResource("9_kt7oo")
emission_shape = 1
emission_sphere_radius = 8.0
direction = Vector2(0, 1)
spread = 25.0
gravity = Vector2(0, 0)
initial_velocity_min = 50.0
initial_velocity_max = 50.0
scale_amount_curve = SubResource("2")
color_ramp = SubResource("3")

[node name="CanvasModulate" type="CanvasModulate" parent="."]
light_mask = 2
visibility_layer = 2
color = Color(0.0509804, 0.00392157, 0.0588235, 1)

[node name="Tramps" type="Node" parent="."]
script = ExtResource("12_yqpm5")

[node name="Tramp" parent="Tramps" instance=ExtResource("11_m77vg")]
z_index = 1
position = Vector2(98, 97)
waypoints = Array[Vector2i]([Vector2i(1, 1), Vector2i(8, 1), Vector2i(8, 3), Vector2i(1, 3)])
sleepTimes = Array[float]([0.0, 1.0, 0.0, 0.0])

[node name="Tramp2" parent="Tramps" node_paths=PackedStringArray("beam") instance=ExtResource("11_m77vg")]
z_index = 1
position = Vector2(98, 97)
beam = NodePath("../Tramp/DecreaseStressParticles")
waypoints = Array[Vector2i]([Vector2i(1, 1), Vector2i(8, 1), Vector2i(8, 3), Vector2i(1, 3)])
sleepTimes = Array[float]([0.0, 1.0, 0.0, 0.0])

[node name="Player" parent="." instance=ExtResource("10_mslo6")]
position = Vector2(226, 220)

[node name="StressMeter" type="Node2D" parent="Player"]
script = ExtResource("11_6y3gv")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_ot2c4")
